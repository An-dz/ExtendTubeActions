{
    "actions": {
        "show upload dates": {
            "enabled": true,
            "exec": "/**\n * @version 1.2\n */\n\n// Action trigger: DOM created\n\nvar videolist = [],\n\tpartition = [],\n\tthumbnails = document.querySelectorAll(\"a[href^=\\\"/watch?\\\"]\"),\n\tytns = \"http://gdata.youtube.com/schemas/2007\"\n\nArray.prototype.forEach.call(thumbnails, function (anchor) {\n\tvar id = anchor.href.match(/v=([^&]+)/)\n\tif (id && id[1])\n\t\tvideolist.push(id[1])\n})\n\nif (!videolist.length)\n\treturn\n\nvideolist = videolist.filter(function (element, position) {\n\treturn videolist.indexOf(element) == position\n})\n\nwhile (videolist.length)\n\tpartition.push(videolist.splice(0, 50))\n\npartition.forEach(function (list) {\n\tvar postdata = \"\\\n<feed xmlns=\\\"http://www.w3.org/2005/Atom\\\"\\n\\\n\txmlns:batch=\\\"http://schemas.google.com/gdata/batch\\\">\\n\\\n\t<batch:operation type=\\\"query\\\"/>\\n\" + list.reduce(function (entry, id) { return entry += \"\\\n\t<entry>\\n\\\n\t\t<id>http://gdata.youtube.com/feeds/api/videos/\" + id + \"</id>\\n\\\n\t</entry>\\n\" }, \"\") + \"\\\n</feed>\",\n\t\txhr = new window.XMLHttpRequest()\n\n\txhr.open(\"post\",\n\t\t\t \"http://gdata.youtube.com/feeds/api/videos/batch?fields=\"\n\t\t\t\t + \"entry(published,media:group/yt:videoid)\",\n\t\t\t false)\n\txhr.setRequestHeader(\"Content-Type\", \"application/atom+xml; charset=utf-8\")\n\txhr.setRequestHeader(\"Content-Length\", postdata.length)\n\txhr.setRequestHeader(\"GData-Version\", 2)\n\n\txhr.onreadystatechange = function () {\n\t\tif (xhr.readyState != 4)\n\t\t\treturn\n\n\t\tvar entries = xhr.responseXML.getElementsByTagName(\"entry\")\n\t\tArray.prototype.forEach.call(entries, function (entry) {\n\t\t\tvar id = entry.getElementsByTagNameNS(ytns, \"videoid\"),\n\t\t\t\tpublished = entry.getElementsByTagName(\"published\"),\n\t\t\t\tthumb, uname, date, month, year\n\n\t\t\tif (!id[0] || !published[0])\n\t\t\t\treturn\n\n\t\t\tuname = document.querySelector(\"a[href*=\\\"v=\" + id[0].textContent + \"\\\"] .yt-user-name\")\n\t\t\tif (!uname)\n\t\t\t\treturn\n\n\t\t\tpublished = new Date(published[0].textContent)\n\t\t\tdate = published.getDate()\n\t\t\tmonth = 1 + published.getMonth()\n\t\t\tmonth = month < 10 ? \"0\" + month : month\n\t\t\tyear = published.getFullYear()\n\n\t\t\tuname.parentNode.style.setProperty(\"height\", \"auto\")\n\t\t\tuname.insertAdjacentHTML(\"afterend\", \"<br>on \" + date + \".\" + month + \".\" + year)\n\t\t})\n\t}\n\n\txhr.send(postdata)\n})\n",
            "trigger": "DOMContentLoaded"
        }
    }
}
